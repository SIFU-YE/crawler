
# 1 概述
数据的排名占比是常用的分析方法，而在透视分析中您无需手写复杂的函数，通过简单的鼠标点击即可快速生成排名占比计算。
# 2 功能介绍
在**度量** 字段上通过快速计算可以生成排名和占比，其中生成排名和占比的入口如下图：
其中关于排名和占比的计算逻辑说明如下表：
全局升序排名 | 指排名字段的数据在整个表格数据中的升序排名（即从小到大，最小的排名第一）  
---|---  
全局降序排名 | 指排名字段的数据在整个表格数据中的降序排名（即从大到小，最大的排名第一）  
组内升序排名 | 指排名字段的数据在其所属最小分组中的升序排名（即从小到大，最小的排名第一）  
组内降序排名 | 指排名字段的数据在其所属最小分组中的降序排名（即从小到大，最大的排名第一）  
全局占比 | 指计算占比字段的数据在整个表格数据总和的占比，其计算公式为：（指定单元格数据/所有数据总和）*100%  
组内占比 | 指计算占比字段的数据在其所属最小分组数据总和的占比，其计算公式为：（指定单元格数据/组内数据总和）*100%  
小计、合计不参与排名。
# 3 场景示例
某大型零售公司，想要分析去年全国各省份的销售额的排名和占比情况。
## 3.1 排名
（1） 以产品demo中的订单模型为例创建透视分析，想要分析2020年各省份销售额的区域排名和全国排名。
（2）勾选/拖拽字段，分别将“发货区域”、”省份“字段放在”行区“，”销售额“字段放在”度量区“，将”订单年份“字段放在”过滤条件区“，并设置其过滤值为”2020“
（3） 在表格/度量区的”销售额“字段上右键点击选择 **快速计算 > 排名 > 组内降序排名 **，生成各省份销售额在所属区域的排名；选择 **快速计算 > 排名 > 全局降序排名 **，生成生成各省份销售额在全国的排名。
在表格区的度量字段上使用快速计算（例如排名），会产生新列；
在度量区的度量字段上使用快速计算（例如排名），不会产生新列。
其中组内排名是指在所属分组中的排名，全局排名是指在所有数据中的排名，如下图江苏省的销售额在其所属区域“华东”内排名第一，在全国省份中排名第二。
（4）为了更清晰表达排名的含义，可以通过“设置显示名”将两个排名字段分别改名为“区域排名”和“全国排名”。
（4）报表设置完成，点击”保存“按钮保存报表，并可点击工具栏上的“预览”按钮进行效果预览。
## 3.2 占比
基于以上报表设置，再在表格/度量区的销售额字段上右键选择 **快速计算 > 占比 > 组内占比 **，生成各省份销售额在所属区域的占比；选择 **快速计算 > 占比 > 全局占比 **，生成各省份销售额在全国的占比。
如下图“云南省”的区域占比为：21,288.88/102,008.02*100%≈20.87%；“云南省”的全国占比为：21,288.88/884,247.25*100%≈2.41%
注：交叉表中的占比是“列汇总百分比”，如下图  
