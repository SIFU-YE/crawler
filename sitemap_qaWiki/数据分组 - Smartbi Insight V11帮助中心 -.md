
## 1 概述
数据分组支持用户按照业务逻辑对数据重新分组归类，如把城市划分为一线城市、二线城市等。
仪表盘上创建的分组字段属于报表私有，若需和其它报表共用，请在数据模型上创建 自定义分组 。
## 2 功能入口
在数据选择区的维度目录上点击可以创建分组字段。
分组字段：只支持选择维度目录下的原始表字段，支持选择层次字段、分组字段、计算列，不支持计算度量、命名集。
## 3 场景示例
### 3.1 枚举分组
1、场景描述：想要统计不同产品类别在一线城市、二线城市和其他城市的销售额。
2、以用产品内置Demo资源的“订单模型”作为数据来源。
3、操作步骤：
（1）在数据选择区的维度目录上点击，选择 **新建分组字段** ，进入新建分组字段界面。
（2）输入分组名称 **城市分组** ，选择分组字段 **发货城市** ，点击 添加分组 ，进入枚举分组设置界面。
枚举分组原则：把“北京、上海、深圳”划为”一线城市“、“南京、厦门、成都、武汉”划为”二线城市“，剩余城市统一归为”其他城市。
（3）下面以“一线城市”分组为例演示如果添加一个分组，输入分组名称 **一线城市** ，在 **可选项** 中选择“北京、上海、深圳”添加到右侧的 **已选项** 中，点击 **确定** 。
  * 可选项：展示分组字段中备选数据，默认只显示10000行数据，数据较多时可在下方搜索栏全量查询，可按shift键一次选中多个值。
  * 已选项：展示已添加的数据，数据较多时可在下方搜索栏查询。
  * 手工输入：可以一次性把多个值加入到“已选项”中，比如：复制excel中的值直接粘贴进来，需要每个值一行。


（4）回到原分组字段界面中，此时可看到分组设置中增加“一线城市”的内容。按照步骤3中的方法继续添加“二线城市”分组后，再把剩余城市归为其他城市，点击 **确定** 。
（5）生成的分组字段属于维度类型的，存放在维度下面的 **自定义维度** 目录中，若需查看修改可在此字段上右键选择 **编辑** 按钮。
（6）以交叉表为例展示数据效果，将 **产品类别** 添加到行区，新建的分组字段 **城市分组** 添加到列区， **销售额** 添加到度量区，这样就可以统计出各产品类别在一线城市、二线城市和其他城市的销售情况。
4、分组字段设置更多说明
  * 存放路径：默认放在“自定义维度”目录下，不支持更改存放路径。
  * 分组方式：
    * 枚举分组：支持用于字符串、数值和日期字段类型数据的分组；一般用于文本字段的分组，比如将城市重新分类为一线城市、二线城市等。
    * 范围分组：支持用于数值和日期字段类型数据的分组，字符串类型不支持范围分组；一般用于数值字段的分组，比如将销售额按数值区间分为大额订单、小额订单等。
    * 合并成一项：将分组外的数据合并为一项显示，用户可以自定义合并项的名称，比如”其他城市“。
    * 保持原值：分组外的数据不做处理，直接按照原始值显示，比如“海南“仍显示为“海南“。
  * 字段描述：用于分组字段的业务描述，可通过鼠标悬浮在分组字段上查看。


### 3.2 范围分组
新建分组字段的入口及分组字段通用功能详见本文的3.1章节，本章节只重点说明范围分组的核心功能。
#### 3.2.1 日期范围分组
1、场景描述：统计2020年上下半年和2021年上下半年不同产品类别的销售额。
2、以用产品内置Demo资源的“订单模型”作为数据来源。
3、操作步骤：
（1）新建分组字段 **日期分组** ，将 **订单日期** 字段按照 **范围分组** ，分为“2020年上半年”、“2020年下半年”、“2021年上半年”和“2021年下半年”。
（2）以交叉表为例展示数据效果，将 **产品类别** 添加到行区，新建的分组字段 **日期分组** 添加到列区，**销售额** 添加到度量区，这样就可以统计出2020年上下半年和2021年上下半年各产品类别的销售情况。
#### 3.2.2 数值范围分组
数值字段的分组是对汇总前的原始数据分组。
1、场景描述：统计每个年龄段雇员的数量。
2、前提条件：
（1）本示例中使用到的数据：Wiki示例-雇员表数据.xlsx 。
（2）将上述数据导入到数据模型中，并保存该数据模型，功能详见：导入文件数据
（3）在仪表盘中创建组件时，业务数据集选择上述步骤2中创建的数据模型。
3、操作步骤：
（1）新建分组字段 **年龄分组** ，将 **Age** 字段按照 **范围分组** ，“0-30”为一组、“30-50”为一组、“50以上”为一组。
（2）基于 **雇员编号** 点右键选择 **复制转度量** ，生成表示人数的度量字段，默认使用计数的汇总依据，并在生成的度量字段的 **属性** 中修改别名为 **人数** 。
（3）以汇总表为例展示数据效果，添加 **年龄分组** 、**人数** 字段到列区上，这样就可以统计出每个年龄段雇员的数量。  
