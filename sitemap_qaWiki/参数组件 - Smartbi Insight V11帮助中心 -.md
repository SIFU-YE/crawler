
## 1 概述
在仪表盘中支持选择数据模型中定义的参数筛选数据。
数据模型参数常应用于以下场景：
  * 在数据模型参数中插入用户属性或函数，实现数据权限控制。
  * 查询结果数据量过大时，可默认过滤部分数据。
  * 下拉树参数的多级筛选效果。
  * 在计算度量、计算成员和命名集中实现动态获取结果。


详情请参考 数据模型-参数应用 。
## 2 场景示例
以下拉树参数为例，演示在仪表盘中如何使用参数组件。
### 2.1 场景说明
在做全国各省份订单分析时，需要切换省份筛选数据，且希望以树形效果展示区域和省份之间的关系。
### 2.2 操作步骤
以产品内置Demo资源的“northwind”作为数据来源。
#### 2.2.1 定义参数
1、创建数据模型，添加查询并定义查询的连接关系，数据模型创建示例详情可参考 使用流程 。
2、添加SQL查询，在SQL查询中定义参数，数据模型参数的详细说明可参考 参数设置 。
3、保存SQL查询后并在数据模型中设置表关系。
4、在数据模型的页面工具栏中点击 **设置参数** ，参数定义内容如下图所示：
5、点击 **确定** ，并点击 **保存** 数据模型，完成数据模型的创建与参数的定义。
#### 2.2.2 制作仪表盘
创建仪表盘，并添加汇总表和柱图组件，勾选需要分析的字段，示例效果如下图所示：
在仪表盘中添加组件的详细说明可参考 创建第一个可视化组件 。
#### 2.2.3 添加参数组件
1、在数据选择区中勾选在本文2.2.1章节中定义的参数，此时会在画布中显示一个参数组件。
2、选中参数组件，在组件设置的 **属性** 中，设置参数组件的名称为 **省份** ，并设置 **自动** 勾选子孙节点，设置如下图所示：
#### 2.2.4 查看效果
勾选东北，查看东北节点下辽宁省和吉林省的数据。
## 3 参数设置
### 3.1 参数组件类型
1、参数组件类型包括：单选列表、多选列表、单选下拉、多选下拉、单选输入框、多选输入框、下拉树单选、下拉树多选、日期、年、年季、年月、年周、时间和日期时间。除下拉树参数外，其他参数组件类型功能说明可参考 筛选器组件类型 。
2、选中参数组件，在组件设置的控件变换类型中，支持修改参数组件的展示类型。
  * 下拉树参数和其他类型的参数组件类型不能相互切换。
  * 单选参数不支持切换到多选参数。
  * 无备选值的参数不支持切换到有备选值的参数，比如在数据模型中原本是单选输入框参数，则无法在仪表盘中切换成下拉参数。无备选值参数类型包括：单选输入框、多选输入框、日期、年、年季、年月、年周、时间和日期时间。


### 3.2 参数属性设置
1、默认值设置
（1）数据模型中的默认值：使用数据模型中“参数管理”界面上设置的“默认值”，作为浏览报表时的默认值。
  * 在报表层添加参数后，点击 **参数设置** ，设置参数默认值为 **数据模型中的默认值** ，如下图所示：


  * 此时参数将使用数据模型中“参数管理”界面上设置的“默认值”，作为浏览报表时的默认值


（2）默认值类型除 **数据模型中的默认值** 外，其他的默认值类型支持范围和参数在数据模型中定义时选择的 **数据类型** 有关，并且参数不支持以下默认值类型：**(全部)、(null)、非(null)** ，其它的支持范围及功能和筛选器组件逻辑一致，详情可查看：默认值类型 。
2、备选值显示 **全部/全选** ，设置入口及效果如下图所示：
  * 单选列表和单选下拉参数，支持设置是否在备选值列表中显示**全部****全部** 将不带任何过滤条件地查询所有值。
  * 多选列表和多选下拉参数，支持设置是否在备选值列表中显示 **全选** 选项。选择 **全选** 时，多选列表参数默认只勾选前100行，而多选下拉参数将一键勾选所有返回的备选值，参数备选值默认返回行数由系统选项>高级设置中的 **PARAM_SV_MAXROW** 控制，详情可参考 系统选项-高级设置 。


3、还原默认值：点击还原默认值，会将参数控件类型还原回数据模型中定义的控件类型。设置入口如下图所示：
4、**被联动后取值** ：支持设置取值类型包含 **默认值、当前选中值、默认值与备选值交集****选中值与备选值交集** ，功能逻辑和筛选器组件一致，详情可查看：被联动后取值 。
5、勾选子孙：
  * 仅支持下拉树多选参数。
  * 默认不开启自动勾选子孙节点，若需要勾选父节点时，自动勾选所有下级节点，则需要在组件设置的属性中进行设置，设置入口及效果如下图所示：


6、其他的属性设置项功能说明，详情可参考 筛选器组件类型 。
## 4 注意事项
1. 筛选器和参数的区别
参数是在数据模型中定义，使用参数提前过滤掉一些数据，避免数据过多影响数据展现结果，对于一些比较难的筛选条件可预先由技术人员定制好后，提供给普通用户使用。
筛选器是在当前仪表盘中定义的，可通过指定的组件或字段筛选数据，实现图表间的联动。
2. 当组件的数据依赖于数据模型的参数，并且在仪表盘上取消了参数对该组件的应用时，该组件将使用数据模型参数的默认值来刷新其数据。
V11版本新建的仪表盘默认不支持选择业务主题和自助数据集，针对从V10及以下版本升级到V11版本的用户，基于业务主题/自助数据集创建的仪表盘，参数组件的应用  
