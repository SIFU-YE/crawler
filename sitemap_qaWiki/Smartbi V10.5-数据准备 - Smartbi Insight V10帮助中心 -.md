
注意：(新特性列表中：+表示新增；^表示增强)
V10.5版本重点详细改进情况如下：
+【指标模型】新增指标模型，配合产品其它功能，形成完善的指标管理体系 |   
---|---  
## **+【指标模型】新增指标模型，配合产品其它功能，形成完善的指标管理体系**
**背景介绍**
指标是企业中用来衡量业务的统一标准，企业的管理者使用各项指标作为判断依据，来分析企业经营状况，例如：我们要了解公司目前人员的稳定情况，可以看公司的【离职率】指标。因此，构建一个完整的指标体系，能全面、快速且有效地帮助管理者分析企业的经营情况。
**功能简介**
Smartbi引入指标管理功能，对业务数据按照企业内部统一规则和标准化计算口径进行处理，形成指标，并且对这些指标进行系统维护；Smartbi的指标管理是一套比较完善的指标体系管理工具，包含初始化指标库、指标维护管理，实现指标展现等功能。
指标模型功能主要有如下特点：
1、一站式指标库初始化及管理。
2、实现指标维护审核机制：由业务人员维护指标，审核人员进行审核。不但保障了指标体系的安全和不断完善，也能充分调动业务人员应用指标平台的积极性。
3、支持指标在自助仪表盘或大屏中展现。
**参考文档**
指标模型操作详情请参见：指标模型。
## **+【数据模型】新增Java查询，快速对接非关系型数据来源**
**背景介绍**
在实际项目应用中，会出现以下取数场景：场景1: 有些客户不想(考虑安全性)或者没有办法连接到数据源，需要通过http接口的方式取数来进行数据分析和仪表盘展示;
场景2: 读文件，读取客户放在某个服务器上的文件数据，比如csv/txt文件;
为了支持以上场景，V10.5版本新增了Java查询类型的模型表，实现了通过文件取数和自定义类读取数据的方式，增加了数据模型的数据来源，保证了数据模型能应用到更多的取数场景。
**功能简介**
在“数据模型”定制界面单击创建私有查询按钮，选择**查询**(如下图所示)，进入Java查询的定制界面。
**参考文档**
Java查询的定制详情请参见：Java查询。
## **^【数据模型】支持数据预览功能**
**背景介绍**
数据模型本身可以预览单个查询的数据，但是无法对多个查询的维度、度量、特别是计算度量进行组合预览，而用户又希望在建模的过程中能快速的核对模型的数据是否正确，所以增加了对整个模型数据的预览功能。
**功能简介**
在数据模型工具栏单击 **模型数据预览** 按钮，在预览窗口左侧勾选字段后，显示数据结果。
## **^【数据模型】增加表关系自动检测**
**背景介绍**
在建模的过程中，用户面对的表不单单是一张表，而是很多表构成的，表与表之间存在着相关联的数据并具有一定的关系，如果让用户自己手动去设置关联关系，费时费力，同时还有可能设错，造成模型查询结果不对；
而V10.5优化了了这个建模过程，如果两个表存在相同的字段名称和数据类型，会“智能”的设置关联关系，这样不但缩短了建模时长还增强了用户体验。
**功能简介**
自动创建模型表关系支持“直连”和“抽取”模式。
系统自动创建模型表关系的前提条件必须同时满足如下两个：
  * 设置了检测表关系的策略；
  * 模型表的字段别名和数据类型必须一致；


**参考文档**
模型表关系检测的功能详情请参见：数据模型工具栏相关说明。
## **^【数据模型】实现模型参数复制，快速复用模型公共参数**
**背景介绍**
在建模过程中经常会用参数来进行控制权限、参数联动、参数嵌套等等，而动态复杂的参数一般都是通过写SQL来实现，并且在实际项目中用户为了适应业务数据展示需要往往会建多个模型，为了能快速复用已经定义好的参数，在V10.5新增了模型参数复用功能，可以一键复用其他模型的参数，简单、快捷。
**功能简介**
在数据模型的“参数管理”面板中，单击**复制参数****确定**
## **+【数据模型】支持自动创建“日期表”，实现时间层次的标准化定义**
在实际项目建模过程中，基本都会建立时间层次来进行数据分析，而很多业务数据的时间/日期都存在事实表中，比如以下几种情况：
场景1: 事实表数据不完整，有些日期下存在数据，有些日期下不存在数据；
场景2：有些业务数据，比如年、年月、年月日等不是标准的日期格式，可能是字符串，这时需要将字符串标记成时间层次，从而来进行数据可视化；
场景3：当模型是多事实表情况下，无法确定创建时间层次的日期字段到底用哪个事实表才合适，这时一个统一的日期就显的尤为重要；
为了解决以上场景，在模型里可以创建一张统一的日期表与事实表进行关联。
“日期表”类型是由系统根据用户设置的起止时间和时间频度自动生成日期字段。该字段包含了所有日期，可以提供给用户创建时间层次。
1、按照用户设置的起止日期及时间字段格式，系统自动生成相应的日期表及时间字段：
2、然后再基于该时间字段”标记为时间层次“：
3、生成相应的时间层次：
参考文档
日期表的功能详情请参见：生成日期表。
## **+【数据模型】新增模型层数据权限，满足用户个性化的数据安全保障**
现在的权限控制都是在数据库源表上，权限比较固定，不同的模型无法实现给不同的用户不同权限，所以在模型层面增加了权限控制，实现用户可以为不同的数据模型设置数据权限，满足用户个性化的数据安全保障。
V10.5版本支持数据模型在直连或抽取状态下，设置数据权限：在“数据准备”界面的资源目录区中找到数据模型节点，在其更多菜单中选择 **设置数据权限** 。
**参考文档**
数据模型的数据权限设置详情请参见：数据模型-数据权限设置。
##  **+【自助ETL】****新增****源库****SQL脚本****节点**
**背景介绍**
自助ETL运行之后的数据会存在Spark中，但是在实际项目业务中，通常会出现以下场景：
  * 场景1：想要直接连接源库不经过sprak执行sql语句,比如对数据进行增删改；
  * 场景2：有时候客户想在Smartbi平台直接对原表修改表结构，而不想跨平台切换到原数据库修改，然后再同步到Smartbi；


为了满足以上场景，新版本自助ETL中新增“源库SQL脚本”节点，支持通过编写SQL脚本直接对数据库进行操作。
**功能简介**
新版本，在自助ETL中新增“源库SQL脚本”节点。
支持编写SQL脚本对数据库进行操作：
**参考文档**
关于源库SQL脚本节点更多功能，详情请参考 自助ETL-源库SQL脚本 。
##  **+【****作业流****】新增检查依赖节点**
**背景介绍**
在实际应用中，用户在使用作业流时会遇到等前一个作业运行成功，后面与之有依赖关系的作业才能继续运行的情况，因此需要有对应的节点用于控制作业运行。为了满足用户需求，新版本作业流中新增“检查依赖”节点，用于解决各个作业执行依赖时运行约束的问题。
**功能简介**
新版本，作业流中新增“检查依赖”节点，可用于检查作业在指定周期内是否有运行成功的实例，如果成功则将执行与之有依赖的后续作业。
**参考文档**
关于检查依赖的功能，详情请参考 如何在作业流成使用“检查依赖"字段节点 。
## **^【数据模型】抽取支持建模和数据抽取独立执行**
在实际项目中，可能存在大量的业务数据，这时用抽取模式会提高查询性能，而当用户在调试模型时，比如简单的更改表关系、增加计算度量等都需要重新抽取数据，而每次抽数都要等十几二十分钟，相当耗时；因此，在新版本中把抽数和建模分离出来，用户有些动作只需要重新建模(建大宽表），而不需要抽数，提高用户的建模效率。
新版本中，数据模型将全表数据抽取功能进行拆分，具体如下：
1. 数据模型支持对单个私有查询进行抽取数据。当模型进行第一次全表抽取并建模后，后续若需增删或修改私有查询，只需对存在数据变更的私有查询进行抽取数据即可，大大提升了抽取效率。
2. 数据模型支持“仅建模”，将所有私有查询按照表关系重新建模，即将所有表构建成一张大宽表。若各私有查询的数据无变更，只是增加或删除度量、计算度量或修改表关系等变更操作，则只需进行建模生成大宽表，无需重新抽取数据。
## **^【数据模型】表关系区支持子布局视图**
子图布局是为了应对复杂模型而设计的，比如多事实模型中有100个表，都放在一个视图中，关系线将错综复杂，编辑和查看都变得很困难；新版本中，一个模型可以创建多张关系图，其中第一张关系图是总图(所有表)，所有的表和关系都在这个视图中整体展现； 而新添加的视图，可以设置某些维度的几个表的模型关系，添加的其他视图都是整体模型关系图的一个子视图。
在V10.5版本中，对数据模型表关系区进行优化，当模型过于复杂时，可增加子布局视图，从而解决数据模型表关系区杂乱无章、查看与编辑不方便的问题。
（1）当现有模型主视图关系错综复杂，可按需创建不同子视图查看：
（2）当需创建新模型，其连接关系过于凌乱，可按需先创建子视图，主视图关系根据子视图自动连接；
**参考文档**
详情可参考文档 数据模型-表关系区
##  **^【作业流】支持****设置****多个****作业流运行****的优先级**
**背景介绍**
作业流本身节点也是有先后顺序的，但是并行的节点是随机排队执行，有些业务用户不想要随机排队，有些任务重要一些就需要优先执行；在新版本中增加了设置单个作业流的优先级，优先级运行规则：先运行“高”>"中">"低" ，同一个等级的根据提交时间顺序执行。
**功能简介**
新版本，在作业流属性中新增“优先级”设置项，作业流可按照“高>中>低”的优先级进行调度，遇到优先级同级的作业流则按顺序调度。
例如：有高中低三个级别的作业流，设置了最大运行作业流数为2，则低级作业流需要等高级、中级作业流运行完成后才能运行。
**参考文档**
关于作业流运行的优先级，详情请参考 作业流 。  
