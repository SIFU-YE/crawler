
本章示例内容都以“管理员”用户演示操作。


# 1、场景说明
我们演示简约版”经营分析指标模型“，它包含如下内容：
  * 维度：“销售人员维”、“地理维”、“发生日期维”（包含“年”、“年季”、“年月”和”年月日“的时间频度）。
  * 指标：合同个数、合同金额、合同预算。


# 2、入口及界面
资源目录区某指标模型的更多菜单中选择 **全局视图** ，即可打开全局视图界面定制指标模型：
# 3、新建指标存储库
如果已经有建好的存储库，该环节可以省略，直接从 新建指标模型节点 章节开始。
指标存储库支持ClickHouse、SQL Server、MySQL、Oracle和PostgreSQL五种类型的数据库作为指标存储库，其中“ClickHouse”类型只支持“ClickHouse21”的版本。
我们创建“MySQL”类型的指标存储库：
1）在“数据连接”主界面单击选择 **MySQL** ：
2）弹出“新建关系数据源”，在数据源配置界面，按照如下进行设置：
3）单击 **测试连接** 按钮，待连接通过后，单击 **保存** 按钮，指标存储库即创建完成。
# 4、新建指标模型节点
1）在“数据准备”界面的资源目录更多菜单中选择 **新建 > 指标模型**。
2）在弹出的“新建指标模型”窗口中设置好名称，选择好数据源和Schema。
3）单击 **确定** 按钮，进入该指标的全局视图界面：
# 5、新建指标“合同个数”
1）在“指标分类”列头菜单中选择 **新建指标分类** ：
2）弹出“新建指标分类”窗口，按照如下输入“编码”和“名称”：
3）单击 **确定** 按钮后，按照如下选择指标分类为”收入指标“、指标名称输入”合同个数“：
指标名称只输入内容，不设置基本属性，表示该指标的基本属性为默认属性：指标类型为”原子指标“、汇总依据为”合计“、指标状态为“启用”。
4）在”维度“列菜单中选择 **新建 > 普通维**：
5）弹出”新建维度“页面，按照如下设置创建”销售人员维“：
6）为维度“销售人员维”新建关联的维表，在菜单中选择 **普通维表** 。
7）弹出”新建维表“页面，按照如下设置创建”销售人员维表“ ，设置完成后，单击 **保存** 按钮，弹出”保存“窗口，直接单击 **确定** 按钮：
8）关闭当前页返回“销售人员维”的编辑界面，选择要绑定的维表和关联字段。
9）设置完成后，单击 **保存** 按钮，弹出”保存“窗口，直接单击 **确定** 按钮，待系统提示创建成功后，关闭当前页返回全局视图页面。
10）在”维度“列菜单中选择 **新建 > 地理维**：
11）弹出”新建维度“页面，按照如下设置创建”地理维“：
12）点击 **层次结构管理** ，通过拖拽维度属性定义层次结构：
13）为维度“地理维”新建关联的维表，在菜单中选择 **普通维表** 。
14）弹出”新建维表“页面，按照如下设置创建”区域维表“ ，设置完成后，单击 **保存** 按钮，弹出”保存“窗口，直接单击 **确定** 按钮：
15）关闭当前页返回“地理维”的编辑界面，选择要绑定的维表和关联字段。
16）设置完成后，单击 **保存** 按钮，弹出”保存“窗口，直接单击 **确定** 按钮，待系统提示创建成功后，关闭当前页返回全局视图页面。
17）在”维度“列菜单中选择 **新建 > 日期维**：
18）在弹出的”新建维度“页面中，创建如下日期维：
19）点击 **层次结构管理** ，通过拖拽维度属性定义层次结构，日期层次需要标记时间层次并设置数据真实格式：
20）为维度“发生日期维”新建关联的维表，在菜单中选择 **日期维表** 。
21）弹出”新建维表“页面，按照如下设置创建“日期维表“ ，设置完成后，单击 **保存** 按钮，弹出”保存“窗口，直接单击 **确定** 按钮：
22）关闭当前页返回“发生日期维”的编辑界面，选择要绑定的维表和关联字段。
23）单击 **保存** 按钮，确定保存位置，返回全局视图页面。
24）在全局视图页面的”维度“列头菜单中选择 **刷新** ：
25）以上步骤创建的维度显示在表格中，在所有维度对应的单元格中单击勾选：
26）在“选择事实表”列头菜单中选择 **新建事实表** ，系统会提示保存，单击 **保存** 按钮后，再新建事实表。
27）在弹出的“选择指标”页面中，勾选“合同个数”指标，点击 **确定** 。
28）在“新建事实表”页面，自动生成包含当前指标及维度的事实表，输入“名称”和“表名“，输入缺少的字段名以及修改字段”合同个数“的数据类型为”整型“，单击 **保存** 按钮，弹出”保存“窗口，直接单击 **保存** 即可。
29）返回全局视图页面，在单元格中为当前指标分别选择绑定的事实表和字段。
# 6、新建指标”合同金额“
1）在全局视图表格第二行中设置：指标分类选择”收入指标“，指标名称输入”合同金额“，勾选上所有维度。
2）在事实表所处单元格的菜单中选择 **编辑事实表** ：
3）在“事实表”编辑页面，按照如下设置添加两个字段，并选择关联类型为 **指标** ：
4）单击 **保存** 按钮，保存成功后，返回全局视图页面，设置指标“合同金额”绑定的事实表和字段：
# 7、新建指标”合同预算“
在全局视图表格第三行中按照如下设置指标“合同预算”：
# 8、维表灌数
1）分别在 ”销售人员维表“ 和 ”区域维表“ 的编辑界面中选择 **新建自助ETL** ：
系统自动创建的日期维不需要灌数。
2）弹出”新建自助ETL“页面，分别按照如下设置为维表创建自助ETL：其中源设置中的库表为系统内置库表。
自助ETL中，必须要源节点执行成功，才能执行目标源节点；且目标源节点的“参数”面板中必须要单击 **字段映射** 按钮，保证映射没问题并保存后才能执行成功。
3）以上两个维表的自助ETL执行成功，则表示维表灌数成功。
# 9、事实表灌数
1）返回全局视图，在“合同事实”事实表所在单元的菜单中选择 **新建自助ETL** ：
2）打开“新建自助ETL”页面，按照如下设置源节点，并执行源节点。
3）源节点执行成功后，按照如下设置目标节点：
4）目标节点设置好后，单击 **字段映射** 按钮，确保映射关系如下并保存映射关系。
5）执行目标节点，执行成功后，保存该自助ETL。
6）返回全局视图页面，单击右下角 **保存** 按钮，即成功创建“经营分析指标模型”。
# 10、资源参考
（1）上述快速创建指标模型的示例资源，可参考指标模型.xml
（2）上述快速创建指标模型的视频演示，可参考快速创建指标模型.mp4  
