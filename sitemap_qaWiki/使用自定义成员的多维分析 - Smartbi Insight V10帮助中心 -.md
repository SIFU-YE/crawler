
## 案例说明
实现一个各商店当年利润分析，展现维度:"商店"，展现度量值:"销售成本"、"销售额"、"净利润"、"净利润的占比"。要求如下：
1）通过新建自定义成员实现"净利润"，"净利润"等于"销售额"减去"销售成本"（净利润=销售额-销售成本）；
2）通过"添加算计" > "添加占比"实现"净利润的占比"；
## 实现步骤
1、已创建好多维数据源
如何创建多维数据源，请参考
2、已创建Mondriancube: "Sales"。
3、使用新建多维分析选择cube"Sales"，案例中的多维分析只有一个cube则直接进入多维分析操作界面。
注：多维数据源中只有一个cube时，在新建多维分析则直接进入多维分析操作界面。
4、创建多维分析
把“Sales” > “维度” > “商店”维度中的“商店”拖拽到多维分析显示查询面板的行区，把“Sales” > “度量值”中的“销售成本”、“销售额”拖拽到多维分析显示查询面板的列区，点工具栏的刷新按钮则刷出数据。如图：
5、新建自定义成员"净利润"
在“数据连接”界面的资源目录区中找到“Mondrion > Sales > 自定义成员，在其更多操作菜单中选择 **新建 > 自定义成员：**
弹出“自定义成员”窗口,在窗口中分别按要求填入“名称”、“层次结构”、“数据格式”、“MDX表达式”等信息，信息要求如下： 
1）名称：输入"净利润"；
2）层次结构：选择Measurse->Measurse（Measurse是度量值层次）；
3）数据格式：浮点型、浮点-默认值（度量值必须要非字符类型）；
4）MDX表达式：从左边的度量值下面分别把“销售额”[Measures].[StoreSales]、销售成本[Measures].[StoreCost]、拖到MDX表达式中再用“-”减号连接，[Measures].[StoreSales]–[Measures].[StoreCost]（净利润=销售额-销售成本）
5）点击 **MDX语法校验** 按钮若弹出"校验通过"说明MDX没有语法问题。
6）点击 **确定** 按钮，弹出"保存成功"对话框并单击 **确定** 。
6、自定义成员引用
在多维分析定制界面的左侧资源目录区中，找到上面定制的自定义成员“净利润”，并拖拽到多维分析显示查询面板的列区，单击工具栏上 **刷新** 按钮预览数据，如图：
7、添加计算"净利润的占比"
在多维分析表格的列头的"净利润"中单击 **操作** 按钮，弹出下拉菜单，选择 **添加计算 > 添加点比 **。如图：添加占比效果如图：
8、保存多维分析报表即可。  
