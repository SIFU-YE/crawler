
即席查询是指通过直接从语义层直接拖拽字段输出数据结果。
**适用情况：** 零基础的业务人员。
## 操作入口
在“数据模型”定制界面单击创建私有查询按钮，选择**查询** （如下图所示），进入即席查询的定制界面。
## 界面介绍
即席查询定制界面如下图所示：
该界面主要分为两个区：
1、数据源选择区：用于在下拉框中选择即席查询依赖的数据源或业务主题，显示所选数据源下的库表字段、过滤器、计算字段，业务主题下的业务对象、业务属性、过滤器、计算字段；支持资源树的右键菜单操作。
该区最底端的文本框支持通过关键字搜索资源对象。
2、展现区：用于以表格形式构建并展现在”数据选择区“中所选的字段和条件，且支持表格字段计算、条件设置、参数设置、分页操作，以及相应的工具栏操作。
## 定制流程
定义即席查询主要包含如下几个步骤：
1、选择数据源：在“数据源”文本框中单击弹出选项框，支持关键字搜索选择数据源或业务主题。
2、选择字段：在”数据源选择区“中勾选字段。
3、（可选）选择条件：条件用于实现对数据结果进行过滤。在”数据源选择区“中拖拽字段或过滤器到”展现区“中的条件区域，并设置默认值，如图：
4、保存即席查询：单击工具栏中的 **保存** 按钮，则当前即席查询会以表的输出方式在数据模型的”表关系区“中。
## 资源树操作
资源源选择区中的资源树支持更多或右键菜单操作：
更多/右键菜单各设置项说明如下：
选择下级子节点 | 用于勾选当前节点下所有子节点，不包含孙及孙以下级别的节点；  
---|---  
选择下级所有子节点 | 用于勾选当前节点下所有子孙节点，包含孙及孙以下级别的节点；  
反选 |  该菜单只作用于子节点，对孙及孙以下级别的节点不生效； 若子节点已勾选，用于取消勾选；若子节点未勾选，用于勾选子节点；  
取消选择下级子节点 | 用于勾除当前节点下所有子节点，不包含孙及孙以下级别的节点；  
取消选择下级所有子节点 | 用于勾除当前节点下所有子孙节点，包含孙及孙以下级别的节点；  
刷新 | 用于刷新当前节点及子孙节点数据；  
属性 |  用于查看当前节点的属性信息，允许修改别名、描述、图标，如下图所示：  
属于业务对象特有的设置项，用于优化加载业务主题的性能。
  * 没有子节点：勾选后用于屏蔽展开按钮，表示当前业务对象没有子节点。
  * 自动检测是否有子结点：勾选后系统自动检测当前业务对象子节点情况，若没有子节点则屏蔽子节点展开按钮。

  
## 展现区操作
### 字段计算
即席查询支持在表格对字段进行排序和聚合操作：
1、排序包括升序、降序、无；
2、聚合包括：
  * 字符型字段：支持”计数“和”唯一计数“聚合计算。
  * 整型、浮点型字段：支持”合计值“、”最大值“、”最小值“、”平均值“、”计数“和”唯一计数“聚合计算。


### 条件设置
字段条件元素包括字段表达式和按钮。表达式由条件对象、逻辑运算符和值域设置项三部分组成；按钮用于对参数进行修改，对条件进行删除或修改条件关系操作。
字段条件元素说明如下：
条件对象 | 条件对象是字段条件的名称，当添加条件后，系统自动根据字段名称生成条件对象名称。  
---|---  
逻辑运算符 | 字符串型 |  条件对象的数据类型是字符串型时，支持匹配的运算符有：等于、不等于、开头为、结尾为、包含、不包含、大于、大于等于、小于、小于等于、为空、不为空、为空串、不为空串； 系统默认运算符为“等于”，默认控件类型为“列表对话框”； 当运算符为“为空”和“不为空”时，没有值域设置项。  
数值型 |  条件对象的数据类型是数值型时，支持匹配的运算符有：等于、不等于、大于、大于等于、小于、小于等于、为空、不为空； 系统默认运算符为“等于”，默认控件类型为“文本输入框”。 当运算符为“为空”和“不为空”时，没有值域设置项。  
日期型 |  条件对象的数据类型是日期型时，支持匹配的运算符有：等于、不等于、大于、大于等于、小于、小于等于、为空、不为空； 系统默认运算符为“等于”，默认控件类型为“日期控件”。 当运算符为“为空”和“不为空”时，没有值域设置项。  
值域设置项 | 选择条件的具体值，表格会根据选择的值对数据进行过滤，只显示选择的值所对应的数据。  
修改参数 | 修改参数（）：用于修改当前参数的别名、类型、默认值等，详情请参考 公共设置-参数定义 。  
删除条件 | 删除条件（）：用于删除当前条件表达式。  
修改条件关系 |  修改条件关系（）：当有两个及以上条件时，可以实现对条件之间的关系进行修改。 条件关系有AND和OR可供选择，系统默认的条件关系是AND。 修改方法如下图： 其中，“聚合条件”是对条件面板中设置了聚合计算的条件进行条件关系修改。  
#### 条件显示设置
即席查询支持条件面板是否显示的设置。
设置方法：单击工具栏中的 **视图** ，在弹出的下拉菜单中勾选或者勾除 **显示条件** ，设置条件面板的显示或隐藏。
#### 报表设置
报表设置可对是否对获取总行数、数据去重等属性进行设置。
设置项说明如下：
获取总行数 |  用于获取即席查询的总行数。
  * 是：行数显示当前查询的总行数；
  * 否：行数显示“未知行”；
  * 系统默认值：使用公共系统选项设置的方式。

在**系统运维 >系统选项>公共设置** 中，“是否获取总行数”设置项选择是，则显示当前查询的总行数；设置项选择否，则显示“未知行”。  
---|---  
数据去重 | 是否去除即席查询中的重复的数据。  
### 参数设置
即席查询中由拖拽字段生成的条件会自动生成参数，且参数默认是隐藏状态。
单击工具栏中的 **视图** ，在弹出的下拉菜单中勾选或者勾除 **显示参数** ，实现设置参数面板的显示或隐藏。
### 分页操作
表格数据超出一页显示时分页显示。
分页操作可以设置跳转页和每页显示行数。
分页操作说明如下：
单击按钮，表格跳转到首页。  
---  
表格跳转到上一页  
表格跳转到下一页。  
输入指定页数字，   
输入数字，设置表格每页显示多少行。  
### 工具栏操作
工具栏从左至右的各功能操作按钮说明如下：
用于刷新当前即席查询数据。  
---  
当即席查询字段来源于多个表时，用于设置表的关联关系。  
用于设置是否显示参数、左侧面板（数据选择区）、条件。  
用于查看当前即席查询执行的SQL语句。  
用于设置报表是否获取总行数、数据是否去重等。  
