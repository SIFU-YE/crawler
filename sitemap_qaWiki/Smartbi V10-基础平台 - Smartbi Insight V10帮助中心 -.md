
注意：(新特性列表中：+表示新增；^表示增强)
  *     *     *     *   *     *     *     *     *     *     *     *     *     *     *     *     *     *     *     *     *     *     * 

V10版本公共设置的改进点如下：
|  |   
---|---|---  
## **+【公共设置】自助仪表盘支持转换规则，字段可按需转换为业务术语**
**背景介绍**
转换规则可以将各字段的内容按需要转换为熟悉的业务术语，用户在使用的过程中，基于转换规则创建的自助数据集来新建自助仪表盘，希望其能继承数据集的转换规则，对于此需求，新版本中对转换规则的适用性进行增强，自助仪表盘可以很好地继承数据集的转换规则。
**功能简介**
基于设置了转换规则的数据集创建自助数据集，转换规则在自助数据集中生效，生效前后显示的数据如下图所示：
使用自助数据集创建的自助仪表盘也生效，如下图所示。
若将转换后的字段作为筛选器，其值为真实值，筛选器无真实值和显示值之分；
**参考文档**
转换规则详细使用方法请参考文档：转换规则操作
##  **+****【公共设置****】****左侧导航条支持排序，功能入口自定义，满足用户个性化需求**
**背景介绍**
在实际应用中，有的用户需要经常使用系统运维等功能，而左侧导航条的顺序是固定的，用户需要点击多次才能打开，操作繁琐。新版本，左侧导航条支持排序功能，可自定义功能入口的顺序，满足用户个性化的需求。
**功能简介**
在我的设置中，新增导航条排序功能，如下图红框标记位置，拖动可调整功能入口的位置，实现导航条自定义排序。
##  **+【公共设置】系统操作日志增加新的操作记录，并规范化**
**背景介绍**
系统操作日志记录的操作内容不是一步到位的，会随着应用的不断深化，项目需求的增加，不断的丰富记录的操作类型。
通过分析日志记录，发现记录并不规范化，存在如下问题：
  * 缺少插件端的操作记录；
  * 在分析电子表格相关操作时，发现打开一个电子表格（数据来源于多个透视分析或即席查询）时，日志记录的是很多条浏览透视分析或即席查询，导致报表打开次数的统计有失真实。


因此，V10版本的日志记录不但增加了不少新操作记录，还对日志进行了规范化的完善。
**功能简介**
1、新增如下操作记录：
  * 电子表格插件端增加的操作记录有：打开、重置、上传回写、导入文件、刷新数据、选择参数刷新、清空数据；
  * 数据集增加的操作记录有：数据快查；
  * 数据源增加的操作记录有：表关系视图；
  * 应用增加的操作记录有：查看应用详情、删除；
  * 其他操作记录有：模块点击记录；
  * 增加打印操作记录，支持打印记录的资源有：透视分析、即席查询、多维分析、灵活分析、电子表格、Word分析报告、PPT分析报告。如下图所示：


2、操作日志按照如下规范进行了调整：
  * 关键字统一为英文：凡涉及id标识的，统一为："*id"；涉及到名称的，统一为："*name"；涉及到路径的，统一为："*path"。
  * 将''统一为“”.
  * 如果某些资源没有对应的path、或name关系信息时，统一显示为path:–;


3、打开电子表格或其他报表时，在相关引用资源的打开记录上增加对应的报表信息（parentid）。表示当前是基于电子表格或其他报表访问的数据集。
## **+【公共设置】产品补丁更新机制，快速修复问题**
**背景介绍**
随着War包越来越大，更新版本的周期变长，为了减少修改bug引起其他问题对项目造成影响，故考虑以补丁包的方式发包，用于快速修复产品问题，不需要重新部署war。
**功能介绍**
产品实现补丁包机制：在基准包的基础上，通过时间节点，将变更代码文件以补丁包的形式进行打包，然后将补丁包手动上传更新，重启服务器后完成补丁更新。
补丁包更新需要重启服务器，取决于它的加载原理：补丁包中含有的后端文件程序可能已经读取过，因此产品补丁包上传后并不会读取补丁包中相同的后端文件，这样会导致补丁更新失败，所以我们需要通过重启机制，清空缓存，让程序去补丁包中重新读取文件，以此来保证补丁更新成功。
补丁包文件名称为“smartbi.upgrade”。
1、补丁包更新适用的情景有：
  * 多数小版本的更新。
  * 项目bug的修复。


2、补丁包文件结构如下：
3、补丁包更新方法：在“系统监控”界面找到 **系统补丁升级补丁** 页面，单击 **更新** 按钮，上传补丁包即可。
**注意事项**
  * 补丁包升级必须先在测试环境验证通过后，才去生产环境补丁升级，以避免灾难性升级。
  * 不支持补丁包的代码文件类型有：.checkstyle、.cvsignore、.project、.classpath、build.xml。


**参考文档**
补丁包升级详情请参见 系统监控-升级补丁 文档。
## ****+ 【公共】新增安全设置操作权限，弹窗样式统一****
**背景介绍**
日志信息在帮助用户日常跟踪、解决问题时起着尤为重要的作用，但由于日志信息可能包含敏感信息，出于对安全的考虑，在新版本中我们进一步细分日志有关权限力度，在系统出现错误时支持对不同的用户呈现不同程度的提示信息，防止泄露错误信息中包含的敏感信息，实现对用户数据的安全高效管理。
**功能简介**
1、在用户管理的操作权限列表中，新增【安全设置】节点：错误详情、导出系统日志、用户日志。
在前端提示信息的弹窗中，支持不同角色看到不同错误信息内容；如下图针对管理/开发人员展示详细的错误信息、导出日志等按钮，其他业务人员仅统一提示错误。
管理/开人员的提示信息对话框 | 业务人员的提示信息对话框  
---|---  
2、V10版本对前端提示弹窗进行了如下的规范化，实现了样式统一。  
其它（除自助仪表盘、自助数据集、数据挖掘模块之外的其它资源） |  信息字体：宋体 信息字号：12px 字体颜色：80%黑色 按钮从左至右依次是：下一个、显示栈信息、确定、导出系统日志；依据当前用户的“安全设置”权限不同显示相应的按钮，“下一个”按钮默认置白显示，另外三个默认第一个置蓝显示。  
自助仪表盘、自助数据集、数据挖掘模块  
## ****+【帮助指引】新增麦粉社区链接****
**背景介绍**
为了方便用户之间的交流互动，更好地提高用户的使用体验，并能够快速解决常见的产品使用问题，新版本我们在系统中添加了麦粉社区的链接及其设置项。
**功能简介**
麦粉社区提供了一个沟通互动的平台，主要分为首页、论坛、认证、讲堂、体验、直播等功能模块。用户可以在这里：
  * 创作自己的作品，并与其他麦粉进行分享、互动；
  * 提出问题，发表观点，交流探讨；
  * 报名参加各种活动，还有培训直播、License申请；
  * 进行产品资格认证的考核；
  * ……


1、增加麦粉社区的链接，链接到麦粉社区首页：
  * 入口一：在系统设置页面右上角。


  * 入口二：在**用户操作 >关于** 中。


2、麦粉社区需要外网环境才能使用，考虑到部分用户不支持外网或暂时不使用麦粉社区的情况，我们默认关闭系统首页麦粉社区的入口。
开启的方法如下：
在系统运维的**系统选项 >高级设置** 中，设置“是否显示麦粉社区链接入口”设置项为“SMARTBI_SUPPORT_URL_DISPLAY=true”。
## ****+【公共】用户行为统计分析****
**背景介绍**
随着Smartbi应用越来越广泛，越来越多的项目、平台运维人员关注应用的上架、推广、使用情况；数据资源的梳理策略、用户的互动、提问情况等。在Smartbi运行过程中，期望通过监测相关的指标，在关键时刻发现用户的使用问题，并提出对应的解决方案（例如：长时间只进行数据分析，但是未制作报表，是什么原因导致用户制作不出报表？），或根据用户的对产品各个功能的点击和使用次数，进行有效的推广、或培训等。
基于这些需求，我们在原有的用户行为相关的统计数据集和报表基础上，重新梳理知识库表，完善了用户行为统计的所有相关数据和信息，以业务主题的方式组织，方便用户直接拖拽字段进行分析。
**功能简介**
用户行为统计内容需要通过部署扩展包来实现：在“系统监控”界面找到 **扩展包** ，上传用户行为统计模块扩展包。（扩展包下载：userbehavioranalysis.ext）
上传扩展包成功后，就可以看到内置的“用户行为分析“业务主题：
## ****+【公共】支持扩展包热加载****
**背景介绍**
当需验证扩展包新效果是否生效时，需花费较多的时间来更换扩展包以及当扩展包出现加载失败等问题，同样需要较多的时间来检验、了解扩展包的相关加载状态；在V10版本中，扩展包支持热加载，用户更换扩展包时无需重启服务器，能迅速知道扩展包的加载状态，实现在线启用、禁用和重新加载扩展包。
**功能简介**
1、扩展包界面新增上传扩展包功能；
用户可通过此功能进行扩展包的上传，上传成功后页面会自动刷新，在页面新增一条扩展包记录。
通过上传功能上传内置扩展包将不会生效！
2、扩展包界面新增状态列；
该状态列用于显示当前扩展包是否启用。
3、扩展包界面新增操作列；
操作列可对当前扩展包进行禁用、启用、重新加载和查看详细信息。
内置扩展包指产品自带的扩展包，是产品的组成部分；因内置扩展包的功能之间存在相互引用，则无法对内置扩展包进行禁用操作。
**参考文档**
详情请参考文档系统监控-扩展包
## **+【其他】产品提供离线下载功能，提高报表导出效率**
**背景介绍**
报表导出到本地是用户经常使用的功能，若报表的数据达到了百万级别时，在线导出不但耗时长，影响用户工作效率，甚至有可能会导致浏览器卡死，因此新版本支持报表的离线下载：报表先下载到指定目录下，等后台下载完成后，用户再到离线下载列表中查看，把离线导出完成的文件下载到本地。
**功能简介**
离线导出采用的是后台导出机制，用户可以继续进行其他操作或者退出系统，导出完成后，用户可到设置的下载目录或离线下载列表中查看和下载导出的文件。
支持离线下载的报表类型有：即席查询、透视分析、电子表格、多维分析、灵活分析。
目前支持离线下载的文件类型有：Excel、CSV。
离线下载功能主要包含如下四个内容：
  * 离线下载存储目录设置：在系统选项公共设置中设置：


  * 离线下载功能执行：在报表工具栏中单击**导出** EXCEL”类型或“CSV”类型，在弹出的窗口中单击**离线导出**


  * 离线消息通知：无论离线导出成功还是离线失败，离线导出结束后，都要发送一条消息给对应用户。


  * 离线导出监控：用于监控当前用户的离线下载记录。


**注意事项**
离线导出支持的最大并发数是40。
**参考文档**
##  **+****【****其他****】报表资源****支持****站内分享功能**
**背景介绍**
V10版本中，用户可以将报表资源在站内分享给平台成员，满足了没有资源权限的用户也可以浏览该报表信息，以及参考报表模板的需求。
**功能简介**
用户可以分享一张或多张报表资源，同时可以控制分享的权限和时间。
被分享的用户收到私信后，打开私信链接浏览报表信息。
**注意事项**
移动端暂不支持站内分享功能。
**参考文档**
## **^【公共设置】UI 界面调整及优化**
**功能简介**
Smartbi V10新登录界面以AI、人工智能、自然语言等意向为设计方向；如下图所示：
## **^【系统主题】主界面风格调整**
**功能简介**
Smartbi V10对系统主界面风格进行调整，新主题具体参数如下：
主风格色：#3f99e7左侧导航栏背景色：#232c52logo背景色：#2c6cb4
默认主题的图片已更新为当前新主题，旧的默认主题更名为：蓝绿；
## **^【公共设置】新增自定义图形主题功能**
**背景介绍**
通过预设多个图形主题一键应用，将报表设计人员从繁琐的组件设计工作中解放出来，提高工作效率。
**功能简介**
图形主题功能实现了系统内置主题以及用户自定义主题，并且将这些主题在自助仪表盘中实现一键应用；具体功能如下：
1、在公共设置界面中新增“图形主题”模块进行内置和自定义主题的预设：
2、预设的主题在自助仪表盘设计时进行一键应用，以及在Echarts图形选项中应用：
3、自定义主题通过“影响分析”可以查看与之关联的自助仪表盘资源：
4、图形主题应用时，对自定义主题和内置主题通过一根1px实线进行分割。
5、图形主题应用时，支持搜索图形主题关键字搜索：
6、图形主题支持右键或双击打开主题详情。
  * 内置主题打开后不允许修改名称、别名等属性，只支持修改代码后另存。
  * 内置主题中新增【示例主题】，该主题添加了较详细的json代码注释，供用户参考。


7、图形主题编辑页面添加了预览功能。
## **^【公共设置】优化弹窗在滚动时的显示界面**
**功能简介**
即席查询、透视分析等报表页面，参数下拉或右键菜单，滚动鼠标移动页面时，下拉框或右键菜单也会跟着移动，新版本优化了这样的操作情景：下拉框或右键菜单在鼠标滚动时隐藏。
移动端中，含有下拉样式的参数控件也按照当前优化效果处理。
## **^【公共设置】资源收藏按钮一键应用**
**背景介绍**
为了简化用户的收藏操作，V10版本对收藏功能优化了处理逻辑，除保留原收藏菜单外实现了一键收藏及取消收藏的功能。
**功能简介**
支持收藏的资源有：自助仪表盘、电子表格、透视分析、即席查询、多维分析、仪表分析、灵活分析、分析报告、页面、应用。
收藏功能主要进行了如下优化处理：
1、在工具栏中的收藏按钮实现一键应用：单击收藏，再次单击取消收藏。
自助仪表盘、电子表格、透视分析、即席查询、多维分析、仪表分析、灵活分析、分析报、页面  
---  
应用 |  1、“应用商店”的应用详情菜单： 2、“我安装的应用”的应用菜单按钮： 以上两个收藏菜单：
  * 灰色显示：表示当前用户未收藏该应用。
  * 橙色显示：表示当前用户已收藏该应用。

  
2、我的收藏夹下可新建目录，自定义收藏位置。
## ****^【资源权限】引用资源批量授权****
**背景介绍**
报表资源权限授权给其他用户/组或角色后，还需要将该报表所引用的资源分别授权给用户，该用户才能成功浏览报表内容，但是若报表引用的资源很多时，这种授权工作无疑是一项耗时耗力的工作，且容易出现资源权限遗漏的情况。为了快速进行引用资源的授权，V10版本实现引用资源批量授权功能。
**功能简介**
资源授权的两个界面，其引用资源批量授权的操作如下：
1、报表资源右键菜单 **资源权限** ，打开资源授权界面，新增用户/组、角色进行引用资源授权：
2、角色的资源授权界面，展开资源树，找到报表级别资源，显示“依赖资源权限”按钮：
**注意事项**
批量授权授予的是“引用”权限。
## ****^【社交】报表社交按钮折叠统一处理****
**背景介绍**
V10版本中，在透视分析、即席查询、电子表格中新增社交按钮；社交功能统一折叠处理，使菜单栏更为美观及方便用户使用。
**功能简介**
以透视分析为例，当菜单栏空间足够时，分享、评论、点赞等社交功能平铺显示；
当菜单栏空间较小，分享、评论、点赞等社交功能无位置平铺显示，将其收于社交按钮中。
##  **^****【****其它****】****消息推送****管理界面功能完善**
**背景介绍**
在日常工作中，会产生各种各样的消息通知，消息推送功能可以让用户实时获取重要消息并及时处理，提高产品活跃度。
V10版本中，我们优化了消息推送管理界面的一些功能。
**功能简介**
1、新增功能：
  * 新增“置顶”按钮，可在消息中心置顶消息；
  * 新增批量删除功能，可一次性删除多条消息；
  * 新增搜索框、“置顶筛选”、“消息分类”、“消息状态”、“发送开始时间”、“发送结束时间”、“重置”等筛选条件。


2、删除功能：
删除“编辑重发”按钮，改为在消息内容界面修改消息内容和设置，然后重发消息。
3、更新功能：
  * 消息管理列表中，删除“接收端”列，新增“发布人”列，用于显示消息的发布人。
  * 分页：滚动列表更新改为分页翻页。


## **^【公共设置】新增网络传输加密算法设置项，支持设置更多加密算法**
**功能简介**
新版本在 **系统运维 >系统选项>高级设置** 中，新增网络传输加密算法设置项，支持设置更多加密算法，满足用户不同应用场景的需求，保护数据安全。
**注意事项**
修改设置项的算法后，WEB端需要刷新页面，移动端需要重新登录，设置项才能生效。
## **^【其他】添加数据模型MDX语句及其执行SQL语句**
**背景介绍**
在使用数据模型时，为了使用户能了解到MDX语句查询所执行的SQL语句，获取更多的信息，便于用户追踪查询问题，新版本在产品日志、系统监控、耗时分析等功能中，新增数据模型MDX执行的SQL语句。
**功能简介**
1、来源于数据模型的自助仪表盘和电子表格的耗时分析功能：SQL改为“SQL/MDX执行”，新增MDX语句及其执行查询的SQL语句。
2、系统监控：
将页面“SQL监控”改为“SQL/MDX监控”，页面中“SQL列”改为“SQL/MDX“，新增MDX语句及其执行查询的SQL语句，支持复制语句。
用户日志、系统监控日志：MDX输出内容中新增执行SQL语句。
3、操作日志：将操作类型“执行SQL”改为“执行SQL/MDX”。
操作日志详细信息中可查看MDX语句及其执行查询的SQL语句。
4、完善Smartbi日志：新增日志文件smartbimdx.log，用于记录MDX相关的信息。
## ****< 【系统运维】数据挖掘配置入口变更****
**背景介绍**
为了提高数据挖掘的灵活性和开放性，新版本支持对数据挖掘相关配置统一管理，同时还支持在界面上传和下载自定义python节点包。
**功能简介**
V10版本在系统运维界面新增菜单“数据挖掘配置”，将系统选项下的引擎设置、执行引擎、服务引擎移到数据挖掘配置下，实现对数据挖掘相关配置统一管理。
在“**挖掘配置管理 > 引擎设置**”界面上新增“上传自定义python节点包”和“自定义python节点包模板”设置项，支持自定义python节点包的上传和下载。
**详情参考**
关于系统运维的引擎配置管理，详情请参考 数据挖掘配置。  
