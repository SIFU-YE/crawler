
  *   *   *   *   *   *   *   *   *   *   * 

**新特性列表中：+表示新增；^表示增强； <表示变更**
新增【+】 | 增强【^】  
---|---  
|  ^【基础平台】“关于Smartbi”窗口标准化：调整产品Logo及增加产品线信息  
## **+【系统集成】新增令牌单点登录方式**
**功能简介**
新版本中，新增了一种加密传输的单点登录方式——“令牌登录”，可用于第三方系统集成Smartbi时单点登录中加密传输用户信息，安全系数更高，不会暴露用户的真实密码。
**参考文档**
详情请参考 令牌登录功能说明 。
## **+【基础平台】资源树实现过滤空目录**
**背景介绍**
产品中因为不同的资源类型可以存放在相同的目录下，会导致某些情况下打开目录看不到任何资源。如公共空间下的目录，目录A下当用户需搜索关键词或点击资源树查找资源时，资源树中的空目录会影响用户的查找效率。
**功能简介**
新版本中，当进行资源搜索或选择数据来源时，点击资源树搜索框旁“过滤空目录”按钮，可隐藏掉空目录。空目录有以下几种情况：
  * 目录本身为空；
  * 当前用户对该目录有访问权限，对其子孙节点没有访问权限，因此查看到的目录为空；
  * 目录不为空，该目录存放着在当前系统模块下无法查看的资源类型。例如分析展现下的公共空间的某目录有一个仪表盘资源，在“数据准备”模块公共空间的相应目录下看不到该资源，对于用户是空目录。


**参考文档**
## **^【基础平台】“关于Smartbi”窗口标准化：调整产品Logo及增加产品线信息**
**功能简介**
通过产品的“关于Smartbi”窗口，用户可以了解到当前系统的产品版本等信息。
新版本对该窗口进行了UI标准化修改：调整了产品的Logo及增加了产品线信息。如下图所示：
## **^【基础平台】支持设置统一的错误提示信息**
**背景介绍**
错误提示信息的系统默认值，通常是一些异常代码、报错的sql等需要相关专业知识才能看懂的信息，这通常是提供给开发和运维人员的。对看不懂的业务人员帮助不大，因此需要为业务人员提供一些有帮助的提示信息。
**功能简介**
新版本中新增了”错误详情“的操作权限，可根据实际需要选择授予用户“错误详情”的权限，如只对开发人员和运维人员授予“错误详情”权限。
  * 拥有“错误详情”权限的用户使用“默认的错误提示信息”；
  * 没有“错误详情”权限的用户使用”统一自定义设置的错误提示信息“；


可通过修改“系统选项-高级设置”中的值，自定义设置统一的错误提示信息。
示例如下：
（1）将设置项“统一错误提示信息”的值修改为：“请致电管理员”；
（2）若用户没有“错误详情”操作权限，提示信息为“系统选项-高级设置”内配置的值。当用户浏览报表时，出现自定义提示信息“请致电管理员”。
（3）当用户拥有“错误详情”操作权限时，提示信息为系统默认值。如拥有“错误详情”操作权限，无相关资源引用权限时，浏览报表，出现系统默认提示信息。
**参考文档**
关于高级设置更多内容可参考文档 系统选项-高级设置 ；
关于错误详情操作权限可参考文档 操作权限-安全设置 。
## **^【基础平台】报表导出功能增加判断机制**
**功能简介**
新版本增加了报表资源导出的判断：增加判断机制，报表已经在导出状态时不允许再次导出，系统会给出相应的提示信息：
目前支持报表资源**导出判断** 的资源类型有：即席查询、透视分析、多维分析（多维探索）、电子表格、自助仪表盘。
## **^【基础平台】操作日志记录优化**
**背景介绍**
用户在Smartbi上的某些操作，会衍生出多个操作日志，例如在系统中浏览相关报表和查询相关结果时，有时候会衍生出相关联的日志，但这些日志之间没有明确的上下文关系标记，导致系统报错时，无法快速定位问题。
除此之外，浏览报表时，在报表中切换了参数或变更了字段等操作都会有一次刷新记录，但日志中也没有明确的刷新标识，无法让用户在系统报错时，快速了解该次刷新操作是因为在报表中执行了什么操作引起的问题。
因此，为了辅助用户更好的定位问题原因，V10版本对操作日志记录进行了优化。
**功能简介**
V10版本对操作日志记录进行了如下优化：
  * 增加了“操作父标识”列，用来记录操作的上下文关系。


一旦系统报错时，我们可以按照报错时间筛选出日志列表后，再逐步找到是哪个操作引起的问题：如下图中，红框标识的三条日志是浏览一张自助仪表盘产生的，“浏览自助仪表盘”和两个“执行SQL/MDX”形成上下文关系，所以这两条“执行SQL/MDX”日志的父标识是“浏览自助仪表盘”的操作标识。因此我们将“操作父标识”列中的内容复制到条件筛选项中，可以找出相同父操作下的所有日志，然后再通过“详细信息”列中的SQL或MDX语句来查找问题。
  * 在“描述”列中增加了“refreshBatchId”的信息，用来记录刷新批次的信息。


我们可以通过批次信息，找到报表是因为什么操作引起的问题：如下图中，同一个操作父标识的日志中，根据刷新批次分为了两组，从“详细信息”中的SQL或MDX中查看每次刷新是切换了什么参数。
**注意事项**
有缓存的情况下，不会每次打开或浏览报表都会生成日志。
**参考文档**
详情请参考 操作日志 。
## **^【基础平台】Log4j升级**
**背景介绍**
Apache的开源项目Log4j 1.x版本已停止维护，不再更新
**功能简介**
在新版本中，Smartbi将产品内置的Log4j升级到Log4j 2，一定程度上提升了性能并降低了内存消耗。
log4j 2还支持采用异步输出，并且能通过配置实现自动删除日志。
## **+【系统运维】限制数据模型的按次抽取的并发数**
**功能简介**
在实际项目应用中，数据模型有大量的数据抽取，为了提高性能，新版本对按次抽取功能在并发数和限时时间上都进行了限制。
在“系统选项－高级设置”中增加设置项，如下图所示：
## **^【系统集成】解决CAS与企业微信、钉钉扩展包的兼容性**
**功能简介**
在新版本中，当Smartbi同时集成了企业微信和CAS或钉钉和CAS，更换新的CAS扩展包后，使用企业微信或钉钉访问Smartbi内的应用时，不会跳转到CAS登录界面，无需再次登录即可访问相关报表资源。
**参考文档**
关于集成企业微信详情可参考文档 企业微信扩展包使用流程 ；
关于集成钉钉详情可参考文档 钉钉集成Smartbi指南 。
## **^【其它】产品地图文件更新**
**功能简介**
随着经济和科技的迅猛发展，各地的行政区划也在不断调整，为了能准确的反映变化，需要定期更新地图数据。新版本，我们更新了产品中的地图文件，根据开源的地图文件新增、删除和修改了一些区域信息。
## **^【图形】Echarts版本升级**
**背景介绍**
随着数据可视化不断的发展，用户对Echarts的需求也在不断增加，为了更好的帮助用户创造出满足各种场景的可视化图形，新版本我们对产品中的Echarts版本进行了升级。将Echarts的版本从Echarts4.8升级到Echarts5.1.2 ，Echarts5.1.2版本官方修复了一些BUG，在功能、性能方面都有很大的提升，同时也带来了一些图形样式的优化。
**功能简介**
由于Echarts5.1.2版本官方更新了默认的系列色，因此新版本图形主题为“无”更新为EchartsV5更新的系列色。例如：
并在图形主题中新增“compatibilityV9”主题，可用于修改图形样式为旧版本的“无”图形主题。  
