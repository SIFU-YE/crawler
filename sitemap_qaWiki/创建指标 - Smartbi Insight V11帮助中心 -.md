
本文将介绍如何创建指标。
## 1 新建入口
创建指标模型目录节点后，打开指标浏览界面。
界面概览如下：
该界面主要分为如下几部分：
  * 指标分类搜索框：用于通过名称关键字搜索指标分类。
  * 指标分类目录树：显示指标分类目录树，支持更多菜单操作。
  * 指标搜索框：用于通过编码或名称关键字搜索指标。
  * 指标列表过滤项：用于设置指标列表过滤项。
  * 指标操作按钮：指标相关操作按钮。从左至右依次如下：
    * 重置：用于将“指标搜索框”、“指标列表过滤项”中设置的内容恢复到默认状态。
    * 刷新 ：用于刷新指标列表。
    * 导出指标：用于导出指标列表到本地。
    * 导入指标：用于批量导入指标、下载指标文件模板。
    * 新建指标：用于创建指标。
  * 指标列表：以列表形式显示指标属性，其中操作栏中的菜单操作详情请分别参见。
  * 指标列表分页：对指标列表中的内容进行分页。


## 2 新建指标
新建指标前，需要明确指标的类型，所以需要先新建指标分类。
然后，新建指标。在“指标管理”界面，单击**新建指标****新建 > 指标。**
手动新建指标是单个指标的创建，这种方式通常是业务人员已有指标库的基础上进行维护时操作。
完整的原子指标创建一共有四步：业务属性、维度设置、存储设置和数据管理，但是在实际应用中，业务人员新建指标是需要经过审核流程，因此这四步不是完全由业务人员完成，还涉及到数管审核人员。本章节重点介绍指标的创建，因此我们用“管理员”的账号来演示这四步的所有内容，省略了审核流程的演示，指标的审核流程详情及演示请参见：指标审核流程。
计算指标创建只有两步：业务属性和指标设置，设置示例请参见：计算指标。
### 2.1 设置指标业务属性
业务属性在审核流程中由业务人员设置，用于设置指标的业务属性。
各设置项说明如下：
指标分类 | 选择指标所属的指标分类  
---|---  
指标编码 |  由系统自动生成，如A_SALE_0000074； 同一个指标模型中，不同指标的指标编码不可以重复。  
指标名称 |  输入指标名称。 该设置项不允许为空。  
指标类型 |  选择指标类型：原子指标、计算指标。 默认为：原子指标。  
汇总依据 |  选择指标的汇总依据：合计、最大值、最小值、平均值、计数、唯一计数、更多； 默认为：合计。其中更多包含：中位数、样本标准差、总体标准差、样本方差、总体方差，以及特定的百分位数（如5、10、25、50、75、90、95）、属性。汇总依据的详细信息可查看：汇总依据介绍。  
指标状态 |  选择指标的状态：启用、禁用。 默认为：启用。 指标被禁用后，若以前建的报表使用了该指标，则报表可以正常浏览该指标的数据。  
数据频度  | 帮助技术人员确定取数的时间结点；可选项有：年、季、月、周、日。  
提出人 | 输入指标的提出人。  
业务口径 | 输入指标的业务口径。  
业务属性设置完成后，单击**下一步**
### 2.2 设置指标维度
维度设置在审核流程中由业务人员设置，用于选择指标所依赖的维度。该步骤为创建指标必选步骤。
维度选择完成后，单击**下一步**
### 2.3 设置指标存储
存储设置在审核流程中由数管中心人员设置，用于设置指标所属的事实表及对应字段。该步骤为创建指标必选步骤。
若指标所属的事实表存在时：直接在“选择事实表”下拉框中选择事实表，在“选择字段”下拉框中选择指标对应的字段；当事实表目录太多时，可通过单击**过滤空目录**
若指标所属的事实表不存在时，可以通过“自动创建”和“手工创建”即时创建事实表：
  * 自动创建：系统自动创建一张新的事实表，并将当前指标及所选的维度默认为事实表的字段，用户可以在此基础上创建其它事实表字段。事实表创建详情请参见：⬝ 创建事实表。


  * 手工创建：进入到“事实表管理”页面手工创建新的空白事实表或编辑已有事实表。事实表创建详情请参见创建事实表。


事实表及字段指定后，可以单击**保存**数据管理功能来实现事实表灌数；也可以单击**下一步** 按钮进行自助ETL绑定后再保存。
设置指标存储时有以下注意事项：
1、只能选择事实表中，关联类型被标记为“指标”的字段；
2、同一个指标不允许关联多个事实表的字段；
3、事实表中，一个字段只能被一个指标关联；
4、指标关联的维度和事实表关联的维度必须完全相同，保证同维度的指标才能关联到同个事实表中。
### 2.4 指标数据灌入
数据管理在审核流程中由数管中心人员设置，用于绑定实现指标灌数的自助ETL。
该步骤为创建指标可选步骤，若该步骤在创建指标时未操作，则需要在创建事实表后通过数据管理功能来实现事实表灌数。
其中“选择自助ETL”和“新建自助ETL”详情请参见：绑定自助ETL。
## 3 指标概览
完成新建指标后，可以查看指标的相关信息，在指标列表操作栏中单击 **概览** ：
2、打开当前指标概览。
## 4 指标搜索
指标管理界面默认是按照指标编码进行排序的，支持通过编码或名称关键字搜索相关指标。
## 5 指标导入和导出
导入指标是通过导入指标文件指创建指标。
单击 **导入指标** 按钮，在弹出的下拉菜单中选择 **导入指标** 导入指标文件即可。
若没有指标文件，可以先 **下载模板** ，在模板中把指标属性定义好再导入该文件。
导入/导出的指标模板如下：
该模板的填写说明如下：
指标分类编码 | 必填项，填写指标所属分类的编码；  
---|---  
指标编码 |  可填项，填写指标编码； 允许为空，此时由系统自动生成。  
指标名称 | 必填项，填写指标名称。  
指标类型 |  可填项，填写指标的类型：原子指标、计算指标； 不填写系统默认为“原子指标”。  
汇总依据 | 可填项，填写指标汇总的依据。  
指标状态 |  可填项，填写指标状态：启用、禁用； 不填写系统默认为“启用”。  
选择维度 | 可填项，填写指标关联的维度，多个维度之间用英文逗号分隔。  
选择事实表 | 可填项，填写指标绑定的事实表。  
选择字段 | 可填项，填写指标绑定的事实表字段。  
表达式 |  可填项，仅用于显示计算指标的计算公式。 支持：四则运算的计算指标 根据规则写的表达式，比如Aggregate({[东北],[华北]，[华东]}，[销售额]),表达式中支持含有字段别名用[]括起来。 原则： 1、对于度量，例如有一个度量name=sales，alias=销售额。那么表达式中只能写：[销售额]，不支持：[sales]、[measure].[sales]2、对于维度，例如有一个维度name=product，alias=产品名称，那么表达式中只能写：[产品名称]，不支持：[product]3、对于层次，例如日期维name=orderDate (alias=订单日期)，有层次name=YEAR (alias=年)。那么表达式只能写[年]，不支持[orderDate].[YEAR] 4、如果表达式中存在计算成员，是无法解析为指标模型的信息的。所以成员的表达式必须是带有维度名称，比如[维度].[成员]。  
数据频度 | 可填项，填写指标汇总的数据频度。  
提出人 | 可填项，填写指标的提出人。  
业务口径 | 可填项，填写指标的业务口径。  
导出指标是指将指标列表中的指标以Excel文件的形式导出到本地，可以帮助用户批量修改指标或快速迁移指标。单击 **导出指标** 按钮即可。
## 6 修改指标
修改指标的业务属性，请执行如下操作：
1、在指标列表操作栏中单击 **编辑** ：
2、进入该指标的业务属性设置界面，下图红框标识的都是可以修改的业务属性：
3、还可以单击 **下一步** ，在“维度设置”界面修改指标所依赖的维度。
4、修改完成后，单击 **保存** 按钮。
## 7 删除指标
在指标操作栏中单击 **删除** ，弹出“删除资源”确认窗口，确定删除后，成功删除当前指标。
## 8 指标溯源
指标溯源是指当前指标关联的维度、事实表及指标分类，操作如下：
1、在指标列表操作栏中单击 **溯源** ：
2、弹出当前指标的“元数据分析”窗口，可以查询与指标有关联关系的各类资源：维度、指标、维表、事实表、ETL、报表等。
在列表资源中双击，可以直接打开维度、事实表等资源查看。
## 9 指标授权
指标除了通过继承指标分类的资源权限实现批量授权外，还可以对单个指标进行授权，操作如下：
1、在指标列表中的指标所属行区任意位置右键单击，弹出右键菜单，选择 **资源授权** ：
2、进入当前指标授权界面：
该界面详细授权操作请参见：资源权限。  
