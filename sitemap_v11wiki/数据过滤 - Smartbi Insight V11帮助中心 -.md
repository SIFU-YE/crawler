
# 1 概述
透视分析中可以通过设置过滤条件动态筛选想要查看的数据，比如在全国的订单销售数据中，可以通过区域筛选器快速切片到“华北”、“华南”等区域的数据。
# 2 功能入口透视分析中拖拽层次
在数据面板的数据资源树中，拖拽字段和参数到**过滤条件区** 。
# 3 场景示例
## 3.1 精确过滤
1、以产品demo中的订单模型为例创建透视分析，想要查看“2020”年“华北”区域的销售额。
2、勾选/拖拽字段，分别将“发货区域”字段放在”行区“，”销售额“字段放在”度量区“，将”订单年份“和“发货区域”字段放在”过滤条件区“。
3、设置“订单年份”的筛选条件值为“2020”、发货区域的筛选条件值为“华北”，可查看到华北地区的销售额。
4、在 **设置 > 属性 > 筛选器** 中可以对过滤条件的 **字体** 、**控件高度** 和**每行列数**
筛选器的 **设置** 按钮中还可以对过滤条件的名称、默认值和备选值进行设置，详情可查看组件筛选
## 3.2 模糊过滤
1、基于以上示例，如果想要查看继续查看“贸易”型公司的销售数据，可以在右侧数据面板中拖拽“公司名称”到 **行区** 和 **过滤条件区** ，并点击过滤条件的 **设置** 按钮
2、设置其 **控件类型** 为“单选输入框”，修改其 **操作符** 为 **模糊匹配**
3、在“公司名称”的输入框中填写“贸易”，便可以查看到华北区域销售给贸易型企业的销售数据。
## 3.3 多过滤条件间联动
在多条件数据筛选时经常会需要条件间的联动，比如“区域”联动“省份”、“产品大类”联动“产品名称”，在透视分析上可以通过设置 **应用于筛选器** 实现
  * 若数据模型中创建了层次，并在透视分析中拖拽层次字段作为过滤条件，那么层次中上面的字段条件默认应用于下面的字段筛选条件。
  * 【补充说明：这里的默认应用即代表联动，联动影响的是筛选器的备选值，对于本身没有备选值类型的控件如日期相关控件，文本输入框等，实际是无效的，需要切换有实际备选值的控件类型如下拉等】
  * 【补充说明：如果模型中 表没有无法直接或者间接产生连接关系的，也无法联动成功】
  * 多个过滤条件间属于“and”关系，暂不支持自定义多过滤条件间的关系。
  * 参数不支持在透视分析中设置联动，参数联动效果需要在数据模型中定义，详情参考参数设置。


1、基于以上示例，想要再从产品角度查看华北区域的销售情况，可以点击 **移除** 或 点击删除按钮去掉“公司名称”过滤条件。
2、在右侧数据面板中拖拽“产品类别”和“产品名称”到 **过滤条件区** ，并设置“产品类别” **应用于筛选器** "产品名称”。
3、此时切换“产品类别”后，“产品名称”的备选值中仅包含所选产品类别中的产品。如下图：
## 3.4 条件组合关系
前提条件
条件组合关系是基于数据模型引擎V2.0开发的，需要先开启数据模型引擎V2.0才能正常使用。
透视分析支持自定义多个筛选条件间的且/或逻辑关系，让业务人员无需编程、可通过简单拖拽设置“且(AND)”或“或(OR)”的组合条件，灵活筛选数据，快速解锁业务洞察，提升决策效率。
例如：以产品内置的 **订单模型** 为例，用户可能希望通过筛选器选择“2013年第四季度”“华南地区”（AND条件）或者 “2014年”和“华北地区”的销售额情况。
具体操作步骤如下：
1、打开透视分析，选择数据模型"订单模型"，然后勾选 ”年“、”季“、”发货区域“、”销售额“、”销售量“。
2、在 **过滤条件区** 添加 ”季“、”发货区域“、”年“、”发货区域’，并且设置默认值，如下图:
3、点击 **条件组合关系** 设置筛选条件之间的筛选关系
鼠标移到过滤条件字段上时，会显示 **条件组合关系** ，点击，弹出框如下：
  * 默认打开时展示过滤条件区的所有筛选字段，默认是且(AND)的关系。
  * 当要改变条件组合关系时，鼠标移入某字段，光标变成一个小手状态，表示可以拖动它，然后拖动到其他字段上放下，或者拖动到其他可放下的位置，形成新的组合关系。
  * 在关系按钮上通过下拉切换或者双击方式，改变关系。
  * 组合关系显示为“且（AND）、或（OR）”。在它们右侧显示一个向下的小箭头，点击该小箭头，可以切换成其他关系。直接双击时，也可以变成相反的关系。


最终设置的效果如下:
4、 设置好 条件组合关系时，点击【确定】，回到页面，点击【查询】，即可查询对应的数据。
1、报表浏览态下：以设置好的”条件组合关系“进行查数，并且隐藏”条件组合关系“设置按钮。
2、删除条件时：当设置好条件关系之后，又删除某个过滤条件，这时，"条件组合关系"也会跟着改变删除，并且把对应的关系删除掉。
3、增加条件：当增加某个条件之后，条件也会跟着增加。规则，以最大的父级为准，如果父级是OR，增加的字段是在父级后面是OR关系；如果父级是AND，则是AND关系。
4、**度量和维度之间，只能是“且(AND)”关系，不可改变。另外，来源于数据模型的参数，不支持设置组合关系，与筛选器套件之间是“且(and)”关系。**
# 4 更多
## 4.1 表格上数据过滤
通过过滤条件过滤数据后，还可以在表格区域的 **行区** 或 **列区** 数据上右键选择**过滤 > 只保留/排除 **进一步对数据进行过滤，使用户可以聚焦在自己所关注的数据区域。
过滤数据如果想要清除过滤，可以在数据上右键选择**清除过滤 。**
## 4.2 参数
透视分析中使用数据模型参数的功能说明，详情可参考 参数 。
和其他筛选器类型不同，下拉树筛选器需要绑定多个字段，所以在设置下拉树筛选器时会有些操作上的不同点。
1、操作示例说明
现在想要生成一个包含 行业名称、销售人员部门、销售人员名称 三层级的下拉树筛选器，操作步骤如下：
1）拖拽字段到过滤条件区，生成一个筛选条件。
2）点击 **编辑** 图标，打开筛选器设置弹窗。
3）点击 **控件类型** ，切换筛选器控件类型到 **单选下拉树** 或 **多选下拉树** 后，筛选字段框变成可操作状态。
4）点击设置 **筛选字段** ，从左侧待选列表中选择字段添加到右侧，作为已选。选中字段后，支持 **双击** 或点击 添加。
仅支持添加字段，不支持添加目录。
5）支持选中已选列表字段，点击右侧的图标，调整下拉树各个层级的顺序
6）点击 **确定** ，则完成下拉树筛选器设置，可勾选节点进行过滤数据。
2、注意事项
  * 即席查询和透视分析只支持下拉树筛选器，不支持列表树筛选器。
  * 下拉树筛选器只支持拖入：字符串字段，时间层次，不支持 日期字段、数值字段、度量、命名集。


3、透视分析的下拉树筛选器本身的筛选过滤逻辑和仪表盘的逻辑一致，关于下拉树筛选器更多说明，详情可查看：树筛选组件 。  
