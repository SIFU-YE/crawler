
业务主题是针对业务的一个概念，它将同一数据源中属于同一个分析主题的表或表中的字段组合在一起，为进一步的可视化数据集提供基本元素。
业务主题我们看作是 Smartbi 产品中的数据仓库，主要应用于可视化数据集等操作。
1、V10.5版本有了全新更强大的功能：数据模型，新安装的产品默认不允许自助仪表盘是否来源于业务主题。
2、导出业务主题时，在导出界面勾选了“导出数据源、数据模型、业务主题设置的行权限”, 可以顺带导出设置的行权限。
## 应用场景
业务主题的应用场景有如下几种情况：
  * 数据源下有很多张表，对于有些客户可能只需要其中几张表进行操作。所以我们可以把客户需要的这几张表提取出来，创建客户需要的业务主题。
  * 某些客户需要表A、B、C，某些客户需要表A、B、D，其中不同的客户要求A和B的表关系有差别。遇到这种情况时，我们可以给这些客户创建不同的业务主题，设置不同的表关系。
  * 使用业务主题还可以对表字段进行自由组合，分级分层，更加便于查询拖拽。


## 组织结构
业务主题是由多业务对象和业务属性组成的，业务对象中又是由业务对象和业务属性组成，即业务对象可以嵌套业务对象。
## 操作入口
**入口1：** 在系统导航栏中选择 **数据准备** ，进入“数据准备”界面并单击快捷菜单 **业务主题** ，进入“新建业务主题”界面：
**入口2** ：在系统导航栏中选择 **数据准备** ，在左侧资源树业务主题的更多中选择“业务主题”，进入“新建业务主题”界面：
## 界面介绍
“业务主题”界面主要分为以下几个区域：
  * 可选资源区：该区主要列出了业务对象和业务属性使用的资源。
  * 业务主题设置区：该区主要进行业务主题包含过滤器的创建、修改和删除。
  * 属性区及表关系视图区：该区主要进行业务对象和业务属性的设置，以及成功创建业务主题后显示该业务主题中各表间的关系视图。该区默认显示的是属性区，可通过“业务主题设置区”左上角的页签来切换到表关系视图区。


## 业务主题相关内容
介绍如何进行业务对象设置。  
---  
介绍如何进行业务属性设置。  
介绍如何进行业务属性过滤器创建。  
介绍业务主题的表关系。  
###  **业务对象**
业务对象是构成业务主题的基本元素。业务对象可以嵌套业务对象，除了第一级业务对象，我们统称为“业务子对象”。业务对象可以从左侧拖拽表进来，也可以新建。
#### **操作入口**
  * 新建业务对象：直接从“可选资源区”的资源列表里拖拽所需的表到“业务主题设置区”或在“业务主题设置区”的空白处右键选择 **新建业务对象** ，右侧“属性区”即显示新建业务对象相关的设置项。
  * 新建业务子对象：在“业务主题设置区”已创建的业务对象的更多操作，选择 **新建业务子对象** ，右侧“属性区”即显示新建业务子对象的设置项。
  * 修改：在“业务主题设置区”已创建的业务对象更多操作，选择 **修改** ，右侧“属性区”即显示该业务主题的相关设置信息。
  * 删除：在“业务主题设置区” 已创建的业务对象更多操作，选择 **删除** ，即删除该业务对象。 


#### **业务对象属性说明**
我们新建业务对象，双击已存在业务对象，或是在其更多操作选择 **修改** ，则可设置业务对象的属性。
业务对象，无需输入。  
---  
业务对象的ID，无需输入，自动生成。  
输入业务属性的真名。  
别名 | 输入此业务属性显示的名称。  
输入此业务属性的描述。  
注意：设置完属性后，必须要点击**确定** 按钮，才会生效。
### **业务属性**
业务属性是组成业务对象的最基本元素，相当于表中的字段。
是否作为计算字段：“是” 选项的 示例
"否"作为普通的业务属性
**操作入口**
  * 新建：直接从“可选资源区”的资源列表里拖拽所需的字段到“业务主题设置区”中的业务对象下，或者在“业务主题设置区”中已创建的业务对象的更多操作，选择 **新建业务属性** ，右侧“属性区”显示新建业务属性的设置项，该设置项的详细信息请参见 业务属性属性说明 。
  * 修改：在“业务主题设置区”中已创建的业务对象的更多操作，选择 **修改** ，右侧“属性区”显示新建业务属性的设置项。
  * 删除：在“业务主题设置区” 已创建的业务属性的更多操作，选择 **删除** ，即删除该业务属性。


业务属性，无需输入。  
---  
业务属性的ID，无需输入，自动生成。  
输入业务属性的真名。  
输入业务属性显示的名称。  
输入此业务属性的描述。  
数据类型 | 选择业务属性的数据类型，主要包括：字符串、整型、长整型、长浮点型、浮点型、日期、时间、日期时间、和未知。  
数据格式 | 根据数据类型选择业务属性的数据格式，该格式选项在 数据格式 中进行设置。  
是否参与分组。即为在查询时是否对该业务属性进行“Group By”。若当前业务属性设置了聚合方式时，该项需要选“否”。  
设置该业务属性，在添加到透视分析度量区时，默认的聚合方式。数值字段有“合计”、“平均”、“计数”、“唯一计数”等，字符串字段没有“合计”及“平均”方式。  
设置与该业务属性关联的业务属性，当两个属性同时作为透视分析的条件时，可实现条件间的数据联动。  
时间计算 | 用于对当前业务属性进行时间计算设置，该业务属性在透视分析时可以进行二次计算。  
可标记业务属性为时间层次，可标记为“年”、“季”、“月”或“日”层次。标记之后，在透视分析中可以用于时间计算： 。  
可设置业务属性在展示时，不展示实际数据，而展示需要显示的数据。可参考 转换规则 。  
设置该业务属性的计算表达式或SQL表达式。业务属性表达式允许使用的资源有：表、视图、参数、字段、业务属性、用户属性。（设置只支持英文字符，勿用中文字符）  
是否生成SQL |  是否生成SQL是指在使用此计算字段时，此计算字段的表达式是否在查询中生成SQL。选择“否”只有下面情况才会用到，当“是否生成SQL”的值为“否”时，可以用以下三个函数来定义计算字段：
  * ROWNUMBER：从第一页开始算。
  * ROWINDEX：从本页开始算。
  * TOTALROWS：总行数。

除以上情形外，该项的值皆为“是”。  
地理维 | 表示标识当前业务属性为地理维字段，可用于自助仪表盘的地图场景中。  
作为透视分析计算字段使用 | 表示当前业务属性在透视分析中可用作计算字段，  
当前业务属性在透视分析中可用作计算字段。
表达式中的字段只能引用业务属性，不能直接引用表字段。
在透视分析中，当用户需要用到计算字段但不想在透视分析中创建时，可直接在业务主题中新建业务属性，勾选此选项作为透视分析计算字段使用。
1、在业务子对象上右键选择“新建业务属性（A）”。
2、填写业务属性信息如下：
如果表达式中用到了聚合函数，聚合方式需要选择“无聚合方式”。
新建透视分析并使用刚才新建的业务属性。
#### 新建分组字段
在业务属性上右键选择“新建分组字段”。
进入自定义分组字段界面：
关于新建分组字段，详情请参考 新建分组字段 。
#### 生成参数
快速生成所选业务属性的参数。
1、在左侧资源树的业务属性中，右键选择“生成参数”。
2、生成“产品名称”的参数：
其中，字符串类型默认控件是列表对话框，日期类型默认的控件是日期控件，其他类型默认的控件是文本输入框。
3、用户需要先设置参数的备选值、默认值等设置项，再使用参数。关于参数配置的说明，详情请参考 参数定义 。
设置完成后也可将参数移动到公共设置的参数定义中：
在业务属性生成的参数上，右键选择“移动到”。
点击**检查冲突（V）****公共设置 >参数定义**
### **层次目录**
层次目录下用于展示数据的层次结构。
层次目录包含新建、修改、删除操作：
拖拽层次目录可改变其在资源树上的位置。
1、在“可选资源区”空白处右键，或者在一个业务对象上右键更多操作，选择 **新建层次** ，右侧“属性区”显示新建层次目录的设置项。
设置项说明如下：
层次目录，无需输入。  
---  
层次目录的ID，无需输入，自动生成。  
输入层次目录的真名。  
输入层次目录显示的名称。  
输入此层次目录的描述。  
2、新建了层次目录后，需要将字段拖到层次目录中，形成层次结构。
新建的层次可在自助仪表盘图形的下钻和交叉表的展开收起功能中使用，例如：
业务主题的层次功能只对自助仪表盘有效，其他报表相当于普通业务对象，无层次效果。
**修改：** 在“业务主题设置区”中已创建的层次目录的更多操作，选择 **修改** ，右侧“属性区”显示编辑层次目录的设置项。
**删除：** 在“业务主题设置区” 已创建的层次目录的更多操作，选择 **删除** ，即删除该层次目录。
### **业务主题表关系**
业务主题的表关系根据系统选项设置可以分为全局的表关系和局部的表关系，需要设置好表关系  
