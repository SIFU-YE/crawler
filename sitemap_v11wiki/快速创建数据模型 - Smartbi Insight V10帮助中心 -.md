
# 1、场景说明
我们演示如下数据模型：
1、构建”产品“维度：包含”产品类别“和”产品“层次。
2、构建”时间“维度：包含”年月日“层次。
3、构建”地理“维度：包含”区域“、”省份“和”城市“层次。
4、构建“客户”维度：包含“顾客编号”、“公司名称”层次。
5、构建”度量“指标：销售量、平均运费、平均单价。
# 2、入口及界面
Smartbi侧边栏点击 **数据准备** ，打开数据准备界面后选择 **数据模型** ，即可开始新建：
# 3、创建模型表
1）通过“数据源表”的方式创建模型表“产品类别表”、“产品表”和“顾客表”：单击，弹出下拉菜单，选择 **数据源表** 。
2）在“选择数据源表”窗口中分别勾选内置库中的表“产品类别表”、“产品表”和“顾客表”：
3）单击 **确定** 按钮，效果如下：
5）在“即席查询”设置界面中，左侧资源选择内置库，从表“订单表”中勾选字段”顾客编号“、“订单日期”、”Freight“、”发货城市“、”省份“、”发货区域“，从表”订单明细表“中勾选字段”产品编号“、”单价“、”数量“。
如果出现”引用的表不存在表关系“，需先设置表关系，如下图：
6）单击即席查询界面中的 **保存** 按钮，再返回数据模型定制界面，修改“即席查询”模型表名称为“零售事实表”：
# 4、创建维层次
1）在“维度”面板新建“产品维”层次目录：
2）再分别将“产品类别表”中的字段“产品类别”和“产品表”中的字段“产品名称”拖拽或移动到“产品维”层次目录下。
3）按照步骤”1）“创建层次目录”地理维“，将分别将模型表”零售事实表“中的字段”发货城市“、”省份“、”发货区域“拖拽或移动到”地理维“目录下，并按照如下方法设置地理维字段的”区域“标识：
必须保证”地理维“中的层次字段按照“区域-省份-城市”的顺序。
4）修改”地理维“下三个字段的别名分别为”销售区域“、”销售省份"、"销售城市“。
5）在“维度”面板中创建“客户维”层次目录，并分别将模型表“顾客表”字段“顾客编号”和“公司名称”拖拽到该层次目录下：
6）在模型表“零售事实表”中找到字段“订单日期”，在其更多菜单中选择 “年-年季-年月-年月日”：
7）在“维度”面板中将模型表“产品类别表”、“产品表”、“顾客表：、”零售事实表“设置成 **在报表中隐藏** 。
# 5、创建度量
1）在模型表”零售事实表“找到字段”单价“、”数量“、”Freight“分别双击，实现将该三个字段设置成度量。
2）在”度量“面板中分别双击该三个字段，弹出”属性设置“窗口，进行如下修改：
  * 单价：别名改为”平均单价“，汇总依据为”平均值“；
  * 数量：别名改为”销售量“；
  * Freight：别名改为”平均运费“，汇总依据为”平均值“；


3 )保存该数据模型，命名为”零售数据模型“，最终效果如下：
# 6、资源参考
（1）上述快速创建数据模型的示例资源，可参考零售数据模型.xml  
